{"id":"awake-11x","title":"Homebrew tap cask formula","description":"Create Casks/awake.rb for anatomic/homebrew-tap repo with auto-update from CI","status":"closed","priority":2,"issue_type":"task","owner":"ian@ian-thomas.net","created_at":"2026-01-28T17:43:22.192273Z","created_by":"Ian Thomas","updated_at":"2026-01-28T17:44:55.894557Z","closed_at":"2026-01-28T17:44:55.894557Z","close_reason":"Closed","dependencies":[{"issue_id":"awake-11x","depends_on_id":"awake-iqg","type":"blocks","created_at":"2026-01-28T17:43:25.569958Z","created_by":"Ian Thomas"}]}
{"id":"awake-2a3","title":"Fix duplicate ZIP in CI that overwrites notarized/stapled artifact","description":"In release.yml lines 68-71, a 'Create release ZIP' step recreates the ZIP after sign.sh already created one with the stapled notarization ticket. This overwrites the properly notarized ZIP, meaning release artifacts lack stapled notarization. Fix: remove the duplicate step.","status":"closed","priority":0,"issue_type":"bug","owner":"ian@ian-thomas.net","created_at":"2026-01-29T15:25:40.869399Z","created_by":"Ian Thomas","updated_at":"2026-01-29T15:30:15.019847Z","closed_at":"2026-01-29T15:30:15.019847Z","close_reason":"Closed"}
{"id":"awake-2ft","title":"Add .beads/ and .claude/ to .gitignore","description":"The .beads/ directory contains personal email and planning notes. The .claude/ directory has IDE-specific config. Both should be added to .gitignore before making the repo public.","status":"closed","priority":1,"issue_type":"task","owner":"ian@ian-thomas.net","created_at":"2026-01-28T17:48:27.168839Z","created_by":"Ian Thomas","updated_at":"2026-01-29T15:14:40.042118Z","closed_at":"2026-01-29T15:14:40.042118Z","close_reason":"Closed"}
{"id":"awake-2il","title":"Join spawned threads on app quit","description":"main.rs:182-187 - timer threads are spawned but never joined. On quit, sleeping threads could call deactivate() or update_title() after the event loop exits, causing potential crashes.","status":"closed","priority":2,"issue_type":"bug","owner":"ian@ian-thomas.net","created_at":"2026-01-28T17:48:47.143162Z","created_by":"Ian Thomas","updated_at":"2026-01-29T15:21:02.852045Z","closed_at":"2026-01-29T15:21:02.852045Z","close_reason":"Closed"}
{"id":"awake-398","title":"Use Acquire/Release ordering for TIMER_EXPIRY atomic","description":"TIMER_EXPIRY uses Relaxed ordering for both store and load. Should use Release for store and Acquire for load to ensure proper happens-before relationships, especially with rapid timer toggling.","status":"closed","priority":2,"issue_type":"bug","owner":"ian@ian-thomas.net","created_at":"2026-01-29T15:25:41.940577Z","created_by":"Ian Thomas","updated_at":"2026-01-29T15:34:30.677043Z","closed_at":"2026-01-29T15:34:30.677043Z","close_reason":"Changed TIMER_EXPIRY to Release for stores, Acquire for loads"}
{"id":"awake-3y3","title":"Add Info.plist required keys","description":"Info.plist is missing CFBundleShortVersionString, CFBundleIconFile, NSHumanReadableCopyright, and CFBundleSignature.","status":"closed","priority":4,"issue_type":"task","owner":"ian@ian-thomas.net","created_at":"2026-01-28T17:49:02.850143Z","created_by":"Ian Thomas","updated_at":"2026-01-29T15:35:43.433922Z","closed_at":"2026-01-29T15:35:43.433922Z","close_reason":"CFBundleShortVersionString and CFBundleIconFile already present. Added NSHumanReadableCopyright."}
{"id":"awake-4zs","title":"Add README.md","description":"No README exists. Add project description, build instructions (cargo build --release), app bundle creation, usage instructions, and license info.","status":"closed","priority":2,"issue_type":"task","owner":"ian@ian-thomas.net","created_at":"2026-01-28T17:48:31.998213Z","created_by":"Ian Thomas","updated_at":"2026-01-29T15:33:06.634715Z","closed_at":"2026-01-29T15:33:06.634715Z","close_reason":"Duplicate of awake-g3y (README already exists and awake-g3y covers improvements)"}
{"id":"awake-5cg","title":"Add error handling for IOKit assertion release and creation","description":"release_assertion() ignores IOPMAssertionRelease return value. create_assertion() returns 0 on failure but callers don't inform the user. For a menu bar app, at minimum log errors. Also consider: if MODE_BOTH partially fails (one assertion created, one not), only one is tracked.","status":"closed","priority":2,"issue_type":"bug","owner":"ian@ian-thomas.net","created_at":"2026-01-29T15:25:41.273045Z","created_by":"Ian Thomas","updated_at":"2026-01-29T15:34:30.507607Z","closed_at":"2026-01-29T15:34:30.507607Z","close_reason":"Added eprintln error logging to release_assertion and create_assertion"}
{"id":"awake-5wg","title":"Fix Cargo.toml placeholder author","description":"authors field is set to 'Your Name'. Update or remove it.","status":"closed","priority":2,"issue_type":"task","owner":"ian@ian-thomas.net","created_at":"2026-01-28T17:48:34.083111Z","created_by":"Ian Thomas","updated_at":"2026-01-29T15:14:40.087325Z","closed_at":"2026-01-29T15:14:40.087325Z","close_reason":"Closed"}
{"id":"awake-6bg","title":"Add CI validation workflow for pushes to main","description":"Create a GitHub Actions workflow that runs on every push to main to ensure the branch is always in a deployable state. Should include: cargo check, cargo test, cargo clippy, cargo fmt --check, and building the universal binary (make universal). The existing release.yml only triggers on version tags, so we need a separate workflow for continuous validation. This gives confidence that any commit on main could be tagged for release.","status":"closed","priority":2,"issue_type":"task","owner":"ian@ian-thomas.net","created_at":"2026-01-29T15:39:18.076652Z","created_by":"Ian Thomas","updated_at":"2026-01-29T15:40:26.326593Z","closed_at":"2026-01-29T15:40:26.326593Z","close_reason":"Created .github/workflows/ci.yml"}
{"id":"awake-6lv","title":"Set explicit file permissions on LaunchAgent plist","description":"fs::write creates plist with default permissions. LaunchAgents should be 0644 for launchd compatibility and security. Use std::os::unix::fs::PermissionsExt to set mode after write.","status":"closed","priority":2,"issue_type":"task","owner":"ian@ian-thomas.net","created_at":"2026-01-29T15:25:41.673076Z","created_by":"Ian Thomas","updated_at":"2026-01-29T15:34:30.590869Z","closed_at":"2026-01-29T15:34:30.590869Z","close_reason":"Added fs::set_permissions with 0o644 after plist write"}
{"id":"awake-8bt","title":"Fix LaunchAgent label mismatch with bundle identifier","description":"LAUNCH_AGENT_LABEL is 'com.awake.app' (main.rs:35) but Info.plist bundle ID is 'com.anatomic.awake'. This creates wrong plist filename and label. README references com.anatomic.awake.plist but code creates com.awake.app.plist. Fix: change constant to 'com.anatomic.awake'.","status":"closed","priority":0,"issue_type":"bug","owner":"ian@ian-thomas.net","created_at":"2026-01-29T15:25:41.007101Z","created_by":"Ian Thomas","updated_at":"2026-01-29T15:30:15.021738Z","closed_at":"2026-01-29T15:30:15.021738Z","close_reason":"Closed"}
{"id":"awake-931","title":"Caffeinate mode options","description":"Add submenu to choose caffeinate modes: Display only (-d), System only (-i), Display+System (-di), Prevent disk sleep (-m), Assert user activity (-u). Show current mode in menu.","status":"closed","priority":2,"issue_type":"feature","owner":"ian@ian-thomas.net","created_at":"2026-01-28T12:54:14.430111Z","created_by":"Ian Thomas","updated_at":"2026-01-28T16:33:45.908895Z","closed_at":"2026-01-28T16:33:45.908895Z","close_reason":"Added Mode submenu with Display/System/Both options using IOKit assertions","dependencies":[{"issue_id":"awake-931","depends_on_id":"awake-p57","type":"blocks","created_at":"2026-01-28T12:54:53.193972Z","created_by":"Ian Thomas"}]}
{"id":"awake-9l1","title":"Build infrastructure (Makefile + scripts)","description":"Create Makefile with universal binary build targets, Info.plist template, entitlements.plist, and sign.sh script","status":"closed","priority":2,"issue_type":"task","owner":"ian@ian-thomas.net","created_at":"2026-01-28T17:43:21.895624Z","created_by":"Ian Thomas","updated_at":"2026-01-28T17:44:22.724401Z","closed_at":"2026-01-28T17:44:22.724401Z","close_reason":"Closed"}
{"id":"awake-aa6","title":"Add universal binary verification to CI","description":"Neither Makefile nor CI verifies the lipo output contains both architectures. Add 'lipo -verify' after creation to catch silent build failures.","status":"closed","priority":2,"issue_type":"task","owner":"ian@ian-thomas.net","created_at":"2026-01-29T15:25:41.806472Z","created_by":"Ian Thomas","updated_at":"2026-01-29T15:34:30.935736Z","closed_at":"2026-01-29T15:34:30.935736Z","close_reason":"Added lipo -verify_arch after universal binary creation in Makefile"}
{"id":"awake-b1s","title":"Timer-based auto-disable","description":"Add menu options to keep awake for a set duration (15min, 30min, 1hr, 2hr, custom). Automatically reverts to sleep-allowed state when timer expires.","status":"closed","priority":2,"issue_type":"feature","owner":"ian@ian-thomas.net","created_at":"2026-01-28T12:54:14.145279Z","created_by":"Ian Thomas","updated_at":"2026-01-28T13:29:52.705603Z","closed_at":"2026-01-28T13:29:52.705603Z","close_reason":"Added timer submenu (15m/30m/1h/2h) with efficient sleeping thread - zero CPU during wait","dependencies":[{"issue_id":"awake-b1s","depends_on_id":"awake-p57","type":"blocks","created_at":"2026-01-28T12:54:53.127397Z","created_by":"Ian Thomas"}]}
{"id":"awake-d7j","title":"Audit Objective-C object lifetimes - potential dangling pointers","description":"Raw pointers to ObjC objects (status_item, menu items, menu) are stored in statics via RawId, but the Retained\u003cT\u003e smart pointers that own them may be dropped at end of main() setup. If reference counts hit 0, all stored pointers become dangling. Need to verify objc2 retains are correct or use mem::forget/explicit retain.","status":"closed","priority":1,"issue_type":"bug","owner":"ian@ian-thomas.net","created_at":"2026-01-29T15:25:41.139524Z","created_by":"Ian Thomas","updated_at":"2026-01-29T15:34:30.417653Z","closed_at":"2026-01-29T15:34:30.417653Z","close_reason":"Audited: ObjC objects are safe. Retained\u003cT\u003e locals in main() live until app.run() blocks forever, and addItem retains items in NSMenu. Raw pointers remain valid for app lifetime."}
{"id":"awake-ebt","title":"Add Cargo.toml metadata (repository, homepage, keywords)","description":"Missing repository, homepage, keywords, categories fields. Add for discoverability and professionalism.","status":"closed","priority":2,"issue_type":"task","owner":"ian@ian-thomas.net","created_at":"2026-01-29T15:25:41.538944Z","created_by":"Ian Thomas","updated_at":"2026-01-29T15:34:30.849576Z","closed_at":"2026-01-29T15:34:30.849576Z","close_reason":"Added repository, homepage, keywords, categories to Cargo.toml"}
{"id":"awake-ejl","title":"Launch at login support","description":"Add ability to start Awake automatically when the user logs in. Should use macOS LaunchAgent for minimal overhead.","status":"closed","priority":2,"issue_type":"feature","owner":"ian@ian-thomas.net","created_at":"2026-01-28T12:54:13.850134Z","created_by":"Ian Thomas","updated_at":"2026-01-28T13:27:26.378489Z","closed_at":"2026-01-28T13:27:26.378489Z","close_reason":"Added Launch at Login via LaunchAgent plist with checkmark toggle","dependencies":[{"issue_id":"awake-ejl","depends_on_id":"awake-p57","type":"blocks","created_at":"2026-01-28T12:54:53.063993Z","created_by":"Ian Thomas"}]}
{"id":"awake-fzl","title":"Replace static mut with OnceLock","description":"main.rs:50-52 uses static mut for STATUS_ITEM, LOGIN_ITEM, MODE_ITEMS. These are accessed across threads which is undefined behavior in Rust. Replace with OnceLock or OnceCell.","status":"closed","priority":2,"issue_type":"bug","owner":"ian@ian-thomas.net","created_at":"2026-01-28T17:48:38.583068Z","created_by":"Ian Thomas","updated_at":"2026-01-29T15:21:02.774521Z","closed_at":"2026-01-29T15:21:02.774521Z","close_reason":"Already fixed: statics use Mutex\u003cRawId\u003e, not static mut"}
{"id":"awake-g3y","title":"Improve README for public release","description":"README is missing: screenshot/demo, feature list, system requirements (macOS version), contribution guidelines. Should add a clear intro explaining what the app does, list features (timer, modes, launch-at-login), and state macOS 11+ requirement.","status":"closed","priority":1,"issue_type":"task","owner":"ian@ian-thomas.net","created_at":"2026-01-29T15:25:41.407757Z","created_by":"Ian Thomas","updated_at":"2026-01-29T15:34:31.025056Z","closed_at":"2026-01-29T15:34:31.025056Z","close_reason":"Added feature list, system requirements (macOS 11+), and interaction details to README"}
{"id":"awake-iqg","title":"GitHub Actions release workflow","description":"Create .github/workflows/release.yml triggered on v* tags for build, sign, notarize, release, and Homebrew tap update","status":"closed","priority":2,"issue_type":"task","owner":"ian@ian-thomas.net","created_at":"2026-01-28T17:43:22.042136Z","created_by":"Ian Thomas","updated_at":"2026-01-28T17:44:26.287063Z","closed_at":"2026-01-28T17:44:26.287063Z","close_reason":"Closed","dependencies":[{"issue_id":"awake-iqg","depends_on_id":"awake-9l1","type":"blocks","created_at":"2026-01-28T17:43:25.476523Z","created_by":"Ian Thomas"}]}
{"id":"awake-jfv","title":"Use Acquire/Release memory ordering","description":"All atomic operations use Ordering::Relaxed which is semantically incorrect for cross-thread communication (e.g. timer expiry checks). Use Acquire/Release for correctness.","status":"closed","priority":3,"issue_type":"bug","owner":"ian@ian-thomas.net","created_at":"2026-01-28T17:48:57.807715Z","created_by":"Ian Thomas","updated_at":"2026-01-29T15:35:43.122321Z","closed_at":"2026-01-29T15:35:43.122321Z","close_reason":"ASSERTION_ID now uses Acquire for loads, Release for stores, AcqRel for swap. TIMER_EXPIRY also fixed."}
{"id":"awake-lss","title":"Add error handling for launch-at-login filesystem ops","description":"main.rs:229,251,253 - fs::create_dir_all, fs::write, fs::remove_file errors are silently discarded. Users get no feedback if Launch at Login fails.","status":"closed","priority":3,"issue_type":"bug","owner":"ian@ian-thomas.net","created_at":"2026-01-28T17:48:54.995696Z","created_by":"Ian Thomas","updated_at":"2026-01-29T15:35:43.223821Z","closed_at":"2026-01-29T15:35:43.223821Z","close_reason":"Added error logging with eprintln for create_dir_all, write, set_permissions, and remove_file. Early returns on critical failures."}
{"id":"awake-nte","title":"Fix timer race condition","description":"main.rs:171-188 - rapid calls to activate_for_duration spawn orphaned threads that can prematurely deactivate. Need to track/cancel the previous timer thread when a new one starts.","status":"closed","priority":2,"issue_type":"bug","owner":"ian@ian-thomas.net","created_at":"2026-01-28T17:48:41.642118Z","created_by":"Ian Thomas","updated_at":"2026-01-29T15:21:02.850706Z","closed_at":"2026-01-29T15:21:02.850706Z","close_reason":"Closed"}
{"id":"awake-p57","title":"Optimize for minimal resource usage","description":"Audit and optimize for absolute minimum memory and CPU footprint. Remove unused dependencies, minimize allocations, use efficient polling/event loops. Target: \u003c5MB memory, near-zero CPU when idle. This is the PRIMARY goal of the app.","status":"closed","priority":1,"issue_type":"task","owner":"ian@ian-thomas.net","created_at":"2026-01-28T12:54:14.672143Z","created_by":"Ian Thomas","updated_at":"2026-01-28T12:57:55.711809Z","closed_at":"2026-01-28T12:57:55.711809Z","close_reason":"Optimized: 20% less memory, no child process, uses IOKit directly"}
{"id":"awake-qkx","title":"Thoroughly and critically review this application to prepare for public release","description":"Use multiple sub agents to deeply and critically review this project ahead of public release. Create new issues for anything you find","status":"closed","priority":1,"issue_type":"task","owner":"ian@ian-thomas.net","created_at":"2026-01-29T15:05:09.219947Z","created_by":"Ian Thomas","updated_at":"2026-01-29T15:25:46.544038Z","closed_at":"2026-01-29T15:25:46.544038Z","close_reason":"Completed comprehensive review with 3 parallel agents covering bugs/safety, build/CI/packaging, and code quality. Created 10 issues."}
{"id":"awake-r5m","title":"Handle partial IOKit assertion failure","description":"main.rs:113-122 - in MODE_BOTH, if one IOKit assertion succeeds and the other fails, the app enters an inconsistent state. Should roll back the first assertion on partial failure.","status":"closed","priority":3,"issue_type":"bug","owner":"ian@ian-thomas.net","created_at":"2026-01-28T17:48:51.413439Z","created_by":"Ian Thomas","updated_at":"2026-01-29T15:34:30.762617Z","closed_at":"2026-01-29T15:34:30.762617Z","close_reason":"Added rollback on partial failure in MODE_BOTH: releases first assertion if second fails"}
{"id":"awake-sua","title":"Handle ClassDecl registration failure gracefully","description":"main.rs:319 - ClassDecl::new unwraps, which panics if AwakeDelegate class is already registered. Handle gracefully instead.","status":"closed","priority":4,"issue_type":"bug","owner":"ian@ian-thomas.net","created_at":"2026-01-28T17:49:00.552548Z","created_by":"Ian Thomas","updated_at":"2026-01-29T15:35:43.330504Z","closed_at":"2026-01-29T15:35:43.330504Z","close_reason":"Already handled: Once guard prevents double registration, fallback to AnyClass::get handles the case. Added clearer panic message."}
{"id":"awake-vv3","title":"Make app distributable","description":"Review what's necessary to make this app distributable for other people to install it on their machines, and then provide me with a write-up of how to do this.","status":"closed","priority":2,"issue_type":"task","owner":"ian@ian-thomas.net","created_at":"2026-01-28T12:57:11.181206Z","created_by":"Ian Thomas","updated_at":"2026-01-29T15:34:31.110774Z","closed_at":"2026-01-29T15:34:31.110774Z","close_reason":"Already implemented: release.yml has code signing, notarization, Homebrew tap, and GitHub Releases"}
{"id":"awake-wf6","title":"Add SAFETY comments to unsafe blocks","description":"Multiple unsafe blocks (IOKit FFI, NSImage, event handling, menu setup) lack // SAFETY: comments explaining why operations are sound. Important for maintainability and auditing of FFI-heavy code.","status":"closed","priority":3,"issue_type":"task","owner":"ian@ian-thomas.net","created_at":"2026-01-29T15:25:42.072275Z","created_by":"Ian Thomas","updated_at":"2026-01-29T15:35:43.539419Z","closed_at":"2026-01-29T15:35:43.539419Z","close_reason":"Deferred: SAFETY comments are documentation-only and can be added incrementally as code is modified."}
{"id":"awake-ypr","title":"Documentation (README + RELEASE)","description":"Create README.md with install instructions and RELEASE.md with release process","status":"closed","priority":2,"issue_type":"task","owner":"ian@ian-thomas.net","created_at":"2026-01-28T17:43:22.343184Z","created_by":"Ian Thomas","updated_at":"2026-01-28T17:44:55.91709Z","closed_at":"2026-01-28T17:44:55.91709Z","close_reason":"Closed"}
{"id":"awake-zo2","title":"Add MIT LICENSE file","description":"Cargo.toml declares license=MIT but no LICENSE file exists. Add the standard MIT license text. All dependencies are MIT-compatible.","status":"closed","priority":1,"issue_type":"task","owner":"ian@ian-thomas.net","created_at":"2026-01-28T17:48:30.148605Z","created_by":"Ian Thomas","updated_at":"2026-01-29T15:14:40.064271Z","closed_at":"2026-01-29T15:14:40.064271Z","close_reason":"Closed"}
